{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student Dashboard</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <style>
      body {
        background: #f4f6f9;
        min-height: 100vh;
      }

      /* NAVBAR */
      .navbar-brand {
        font-weight: 700;
        letter-spacing: 0.5px;
      }

      /* DASHBOARD CONTAINER */
      .dashboard-container {
        max-width: 1100px;
        margin: auto;
        padding: 2rem 1rem;
      }

      /* CARDS */
      .action-card {
        border: none;
        border-radius: 1rem;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
        transition: 0.3s;
      }

      .action-card:hover {
        transform: translateY(-5px);
      }

      .action-icon {
        font-size: 2.5rem;
      }

      /* STATUS BADGES */
      .status-badge {
        padding: 0.4rem 0.8rem;
        border-radius: 0.5rem;
        font-weight: 500;
        color: #fff;
      }

      .status-pending {
        background-color: #ffc107;
        color: #212529;
      }

      .status-approved {
        background-color: #198754;
      }

      .status-rejected {
        background-color: #dc3545;
      }

      /* TABLE */
      .table thead {
        background-color: #f1f3f5;
      }
    </style>
  </head>

  <body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
      <div class="container">
        <a class="navbar-brand" href="#">Student Help Desk</a>

        <div class="d-flex align-items-center gap-3">
          <span class="text-white fw-semibold"> {{ student.fullname }} </span>
          <a href="{% url 'logout' %}" class="btn btn-outline-light btn-sm">
            Logout
          </a>
        </div>
      </div>
    </nav>

    <!-- DASHBOARD CONTENT -->
    <div class="dashboard-container">
      <h3 class="fw-bold mb-1">Welcome back üëã</h3>
      <p class="text-muted mb-4">
        Track your complaints and submit new requests below.
      </p>

      <!-- ACTION CARDS -->
      <div class="row g-4 mb-5">
        <div class="col-md-6">
          <div class="card action-card p-4">
            <div class="d-flex align-items-center gap-3">
              <div class="text-primary action-icon">üìù</div>
              <div>
                <h5 class="mb-1">Submit Complaint</h5>
                <p class="text-muted mb-2">
                  Send a new complaint to management
                </p>
                <a
                  href="{% url 'submit_complaint' %}"
                  class="btn btn-primary btn-sm"
                >
                  Submit Now
                </a>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card action-card p-4">
            <div class="d-flex align-items-center gap-3">
              <div class="text-success action-icon">üìÇ</div>
              <div>
                <h5 class="mb-1">My Complaints</h5>
                <p class="text-muted mb-2">
                  View status of submitted complaints
                </p>
                <a
                  href="{% url 'view_student_complaints' %}"
                  class="btn btn-success btn-sm"
                >
                  View Complaints
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- RECENT COMPLAINTS -->
      <h4 class="mb-3">Recent Complaints</h4>

      {% if complaints %}
      <div class="table-responsive">
        <table
          class="table table-hover align-middle bg-white rounded shadow-sm"
        >
          <thead>
            <tr>
              <th>#</th>
              <th>Title</th>
              <th>Status</th>
              <th>Date Submitted</th>
            </tr>
          </thead>
          <tbody>
            {% for complaint in complaints %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ complaint.title }}</td>
              <td>
                {% if complaint.status == 'Pending' %}
                <span class="status-badge status-pending">Pending</span>
                {% elif complaint.status == 'Approved' %}
                <span class="status-badge status-approved">Approved</span>
                {% else %}
                <span class="status-badge status-rejected">Rejected</span>
                {% endif %}
              </td>
              <td>{{ complaint.created_at|date:"M d, Y" }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <p class="text-muted">You have not submitted any complaints yet.</p>
      {% endif %}
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
